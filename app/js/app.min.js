document.addEventListener("DOMContentLoaded", () => {

    if (document.getElementById('indexSlider')) {
        const sliderBrands = new Swiper('#indexSlider', {
            spaceBetween: 10,
            loop: true,
           /* autoplay: {
                delay: 5000,
            },*/
            pagination: {
                el: '#indexSliderPage',
                clickable: true,
            },
            on: {
                slideChange: function (e) {
                    /*e.autoplay.run();*/
                }
            }
        });
    }

    if (document.getElementById('heroesSlider')) {
        const sliderBrands = new Swiper('#heroesSlider', {
            spaceBetween: 1,
            navigation: {
                nextEl: '#heroesSlider .swiper-button-next',
                prevEl: '#heroesSlider .swiper-button-prev',
            },
            slidesPerView: 4,
            breakpoints: {
                300: {
                    slidesPerView: 'auto',
                },
                991: {
                    slidesPerView: 'auto',
                },
                1200: {
                    slidesPerView: 4,
                },
            },
            on: {
                init: function (e) {

                }
            }
        });
    }

    const slider_product = document.querySelectorAll('.slider_product');

    slider_product.forEach(el => {
        let nextNav = el.querySelector('.swiper-button-next');
        let prevNav = el.querySelector('.swiper-button-prev');
        let scrollbarNav = el.querySelector('.swiper-scrollbar');

        new Swiper(el, {
            navigation: {
                nextEl: nextNav,
                prevEl: prevNav,
            },
            spaceBetween: 30,
            slidesPerView: 4,
            scrollbar: {
                el: scrollbarNav,
                draggable: true,
            },
            breakpoints: {
                300: {
                    slidesPerView: 'auto',
                    spaceBetween: 20,
                },
                991: {
                    slidesPerView: 'auto',
                    spaceBetween: 20,
                },
                1200: {
                    slidesPerView: 4,
                    spaceBetween: 30,
                },
            },

        });
    });

    if (document.getElementById('videoSlider')) {
        const sliderBrands = new Swiper('#videoSlider', {
            spaceBetween: 30,
            slidesPerView: 3,
            navigation: {
                nextEl: '#videoSlider .swiper-button-next',
                prevEl: '#videoSlider .swiper-button-prev',
            },
            pagination: {
                el: '#videoSlider .swiper-pagination',
                clickable: true,
            },
            breakpoints: {
                300: {
                    slidesPerView: 'auto',
                    spaceBetween: 20
                },
                700: {
                    slidesPerView: 2,
                    spaceBetween: 20
                },
                991: {
                    slidesPerView: 3,
                    spaceBetween: 20
                },
                1200: {
                    slidesPerView: 3,
                    spaceBetween: 30
                },
            }
        });
    }

    if (document.getElementById('newsSlider')) {
        const sliderBrands = new Swiper('#newsSlider', {
            spaceBetween: 30,
            slidesPerView: 3,
            navigation: {
                nextEl: '#newsSlider .swiper-button-next',
                prevEl: '#newsSlider .swiper-button-prev',
            },
            pagination: {
                el: '#newsSlider .swiper-pagination',
                clickable: true,
            },
            breakpoints: {
                300: {
                    slidesPerView: 'auto',
                    spaceBetween: 20
                },
                700: {
                    slidesPerView: 2,
                    spaceBetween: 20
                },
                991: {
                    slidesPerView: 3,
                    spaceBetween: 20
                },
                1200: {
                    slidesPerView: 3,
                    spaceBetween: 30
                },
            }
        });
    }

    document.querySelectorAll('.custom_scroll').forEach(el => {
        new SimpleBar(el);
    });

    if (document.getElementById('bigSlider')) {
        var thumbnailSlider = new Swiper("#thumbnailSlider", {
            direction: 'vertical',
            spaceBetween: 15,
            slidesPerView: 4,
            watchSlidesProgress: true,
            allowTouchMove: false
        });

        var bigSlider = new Swiper("#bigSlider", {
            spaceBetween: 15,

            thumbs: {
                swiper: thumbnailSlider,
            },

            breakpoints: {
                300: {
                    pagination: {
                        el: '#bigSlider .swiper-pagination',
                        clickable: true,
                    }
                },
                991: {
                    pagination: {
                        el: '#bigSlider .swiper-pagination',
                        clickable: true,
                    }
                },
                1200: {
                    pagination: false
                },
            }
        });
    }

    if (document.getElementById('artSlider')) {

        new Swiper("#artSlider", {
            spaceBetween: 30,
            slidesPerView: 2,
            navigation: {
                nextEl: '#artSliderNext',
                prevEl: '#artSliderPrev',
            },
            breakpoints: {
                300: {
                    spaceBetween: 20,
                    slidesPerView: 'auto',
                    scrollbar: {
                        el: '#artSlider .swiper-scrollbar',
                        draggable: true
                    },
                },
                991: {
                    spaceBetween: 20,
                    slidesPerView: 'auto',
                    scrollbar: {
                        el: '#artSlider .swiper-scrollbar',
                        draggable: true,
                    }
                },
                1200: {
                    spaceBetween: 30,
                    slidesPerView: 2,
                },
            }
        });
    }

    if (document.getElementById('tagsSlider')) {
        let tags = document.querySelectorAll('#tagsSlider .swiper-slide a');
        [].forEach.call(tags, function (elem) {
            elem.parentNode.style.width = elem.offsetWidth + 'px';
        });

        new Swiper("#tagsSlider", {
            spaceBetween: 10,
            slidesPerView: 'auto',
            allowTouchMove: false,
            breakpoints: {
                300: {
                    allowTouchMove: true
                },
                991: {
                    allowTouchMove: true
                },
                1200: {
                    allowTouchMove: false
                },
            }
        });
    }

    if (document.getElementById('tagsSlider2')) {
        let tags = document.querySelectorAll('#tagsSlider2 .swiper-slide a');
        [].forEach.call(tags, function (elem) {
            elem.parentNode.style.width = elem.offsetWidth + 'px';
        });

        new Swiper("#tagsSlider2", {
            spaceBetween: 10,
            slidesPerView: 'auto',
            allowTouchMove: false,
            breakpoints: {
                300: {
                    allowTouchMove: true
                },
                991: {
                    allowTouchMove: true
                },
                1200: {
                    allowTouchMove: false
                },
            }
        });
    }


    if (document.getElementById('filterSlider') && window.innerWidth < 701) {
        console.log(window.innerWidth);

        let tags = document.querySelectorAll('#filterSlider .page-top-filter__links__item a');
        [].forEach.call(tags, function (elem) {
            elem.parentNode.style.width = elem.offsetWidth + 'px';
        });

        new Swiper("#filterSlider", {
            spaceBetween: 15,
            slidesPerView: 'auto',
            allowTouchMove: false,
            freeMode: false,
            slideClass: 'page-top-filter__links__item',
            breakpoints: {
                300: {
                    allowTouchMove: true,
                    freeMode: true,
                },
                700: {
                    allowTouchMove: true,
                    freeMode: true,
                },
                1200: {
                    allowTouchMove: false,
                    freeMode: false,
                },
            }
        });
    }

    if (document.getElementById('mobSearchOptions')) {


        /*let tags = document.querySelectorAll('#mobSearchOptions .search-page__form__options__item__label');
        [].forEach.call(tags, function (elem) {
            elem.parentNode.style.width = elem.offsetWidth + 'px';
        });*/

        new Swiper("#mobSearchOptions", {
            spaceBetween: 15,
            slidesPerView: 'auto',
            allowTouchMove: false,

            breakpoints: {
                300: {
                    allowTouchMove: true
                },
                700: {
                    allowTouchMove: true
                },
                1200: {
                    allowTouchMove: false
                },
            }
        });
    }

    if (document.getElementById('gallerySlider')) {

        new Swiper("#gallerySlider", {
            slidesPerView: 5,
            spaceBetween: 2,
            navigation: {
                nextEl: '#gallerySliderNext',
                prevEl: '#gallerySliderPrev',
            },
            breakpoints: {
                300: {
                    slidesPerView: 2,
                    spaceBetween: 5,
                },
                700: {
                    slidesPerView: 3,
                    spaceBetween: 5,
                },
                991: {
                    slidesPerView: 4,
                    spaceBetween: 2,
                },
                1200: {
                    slidesPerView: 5,
                    spaceBetween: 2,
                },
            }
        });
    }

    if (document.getElementById('gallerySlider_col6')) {

        new Swiper("#gallerySlider_col6", {
            slidesPerView: 6,
            spaceBetween: 2,
            breakpoints: {
                300: {
                    slidesPerView: 2,
                    spaceBetween: 5,
                    navigation: {
                        nextEl: '#gallerySlider_col6_next',
                        prevEl: '#gallerySlider_col6_prev',
                    },
                },
                700: {
                    slidesPerView: 3,
                    spaceBetween: 5,
                },
                991: {
                    slidesPerView: 4,
                    spaceBetween: 0,
                },
                1200: {
                    slidesPerView: 6,
                    spaceBetween: 2,
                },
            }
        });
    }

    if (document.getElementById('sliderActors')) {

        new Swiper("#sliderActors", {
            slidesPerView: 4,
            spaceBetween: 30,
            navigation: {
                nextEl: '#sliderActors .swiper-button-next',
                prevEl: '#sliderActors .swiper-button-prev',
            },
            breakpoints: {
                300: {
                    slidesPerView: 1,
                    spaceBetween: 30,
                },
                600: {
                    slidesPerView: 2,
                    spaceBetween: 15,
                },
                991: {
                    slidesPerView: 3,
                    spaceBetween: 30,
                },
                1200: {
                    slidesPerView: 4,
                    spaceBetween: 30,
                },
            }
        });
    }

    if (document.getElementById('sliderPoster')) {

        new Swiper("#sliderPoster", {
            slidesPerView: 4,
            spaceBetween: 30,
            lazy: {
                loadPrevNext: true,
            },
            navigation: {
                nextEl: '#sliderPoster .swiper-button-next',
                prevEl: '#sliderPoster .swiper-button-prev',
            },
            breakpoints: {
                300: {
                    slidesPerView: 1,
                    spaceBetween: 30,
                },
                440: {
                    slidesPerView: 2,
                    spaceBetween: 15,
                },
                600: {
                    slidesPerView: 3,
                    spaceBetween: 15,
                },
                991: {
                    slidesPerView: 3,
                    spaceBetween: 30,
                },
                1200: {
                    slidesPerView: 4,
                    spaceBetween: 30,
                },
            }
        });
    }

    if (document.getElementById('sliderAuthors')) {

        new Swiper("#sliderAuthors", {
            slidesPerView: 4,
            spaceBetween: 30,
            navigation: {
                nextEl: '#sliderAuthors .swiper-button-next',
                prevEl: '#sliderAuthors .swiper-button-prev',
            },
            breakpoints: {
                300: {
                    slidesPerView: 2,
                    spaceBetween: 15,
                    scrollbar: {
                        el: '#sliderAuthors .swiper-scrollbar',
                        draggable: true,
                    }
                },
                700: {
                    slidesPerView: 3,
                    spaceBetween: 15,
                    scrollbar: {
                        el: '#sliderAuthors .swiper-scrollbar',
                        draggable: true,
                    }
                },
                991: {
                    slidesPerView: 3,
                    spaceBetween: 30,
                    scrollbar: false
                },
                1200: {
                    slidesPerView: 4,
                    spaceBetween: 30,
                    scrollbar: false
                },
            }
        });
    }

    if (document.getElementById('teamsSlider')) {
        const sliderBrands = new Swiper('#teamsSlider', {
            slidesPerView: 4,
            navigation: {
                prevEl: '#teamsSlider__btnPrev',
                nextEl: '#teamsSlider__btnNext',
            },
            breakpoints: {
                300: {
                    slidesPerView: 1,
                },
                440: {
                    slidesPerView: 1,
                },
                768: {
                    slidesPerView: 3,
                },
                991: {
                    slidesPerView: 4,
                },
                1200: {
                    slidesPerView: 4,
                },
            },
            on: {
                init: function (e) {

                }
            }
        });
    }

    if (document.getElementById('gallery')) {
        new Swiper('#gallery', {
            slidesPerView: 6,
            lazy: true,
            navigation: {
                prevEl: '#gallery__btnNext2',
                nextEl: '#gallery__btnPrev2',
            },
            breakpoints: {
                300: {
                    slidesPerView: 2,
                },
                440: {
                    slidesPerView: 2,
                },
                768: {
                    slidesPerView: 3,
                },
                991: {
                    slidesPerView: 4,
                },
                1300: {
                    slidesPerView: 6,
                },
            }
        });
    }

    if (document.getElementById('posterSlider')) {
        new Swiper('#posterSlider', {
            slidesPerView: 4,
            spaceBetween: 30,
            navigation: {
                nextEl: '#gallery__btnNext',
                prevEl: '#gallery__btnPrev',
            },
            lazy: {
                loadPrevNext: true,
            },
            breakpoints: {
                300: {
                    slidesPerView: 1,
                },
                440: {
                    slidesPerView: 1,
                },
                768: {
                    slidesPerView: 3,
                },
                991: {
                    slidesPerView: 4,
                },
                1200: {
                    slidesPerView: 4,
                },
            }
        });
    }

    const widthScreen = window.innerWidth || document.documentElement.clientWidth ||
        document.body.clientWidth;

    if (document.getElementById('actorsSlider')) {
        if (widthScreen < 991) {
            new Swiper('#actorsSlider', {
                spaceBetween: 30,
                navigation: {
                    prevEl: '#actorsSlider__btnNext',
                    nextEl: '#actorsSlider__btnPrev',
                },
            });
        }
    }

    if (document.getElementById('mobSliderActors')) {
        if (widthScreen < 601) {
            new Swiper('#mobSliderActors', {
                spaceBetween: 30,
                autoHeight: true,
                navigation: {
                    prevEl: '#mobSliderActors .swiper-button-prev',
                    nextEl: '#mobSliderActors .swiper-button-next',
                },
            });
        }
    }

    if (document.getElementById('sliderMegaHero')) {

        new Swiper('#sliderMegaHero', {
            slidesPerView: 6,
            spaceBetween: 30,
            loop: false,
            breakpoints: {
                300: {
                    slidesPerView: 'auto',
                    loop: false,
                    scrollbar: {
                        el: '#sliderMegaHero .swiper-scrollbar',
                        draggable: true,
                    }
                },
                440: {
                    slidesPerView: 'auto',
                    loop: false,
                    scrollbar: {
                        el: '#sliderMegaHero .swiper-scrollbar',
                        draggable: true,
                    }
                },
                700: {
                    slidesPerView: 3,
                    loop: false,
                    scrollbar: {
                        el: '#sliderMegaHero .swiper-scrollbar',
                        draggable: true,
                    }
                },
                991: {
                    slidesPerView: 4,
                    loop: true,
                    scrollbar: false,
                },
                1200: {
                    slidesPerView: 6,
                    loop: false,
                    scrollbar: false,
                },
            }
        });

    }


    Fancybox.bind("[data-fancybox]", {
        Carousel: {
            Navigation: {
                prevTpl:
                    '<div class="swiper-button-prev">\n' +
                    '                    <div class="swiper__nav swiper__nav--prev swiper__nav--white">\n' +
                    '                        <div class="swiper__nav__inner">\n' +
                    '                            <svg class="icon" width="24" height="20">\n' +
                    '                                <use xlink:href="#svg-prev-sl"></use>\n' +
                    '                            </svg>\n' +
                    '                        </div>\n' +
                    '                    </div>\n' +
                    '                </div>',
                nextTpl:
                    '<div  class="swiper-button-next">\n' +
                    '                    <div class="swiper__nav swiper__nav--next swiper__nav--white">\n' +
                    '                        <div class="swiper__nav__inner">\n' +
                    '                            <svg class="icon" width="24" height="20">\n' +
                    '                                <use xlink:href="#svg-next-sl"></use>\n' +
                    '                            </svg>\n' +
                    '                        </div>\n' +
                    '                    </div>\n' +
                    '                </div>',
            },
        },
        Toolbar: {
            display: ["close"],
        },
    });

    /* const navs = document.querySelectorAll('.header__nav__item--children > a');

     navs.forEach(el => {
         el.addEventListener('click', (event) => {
             event.preventDefault(false);
             let liNav = el.parentNode;
             if (liNav.classList.contains('open')) {
                 liNav.classList.remove('open');
             } else {
                 if (document.querySelector('.header__nav__item--children.open')) {
                     document.querySelector('.header__nav__item--children.open').classList.remove('open');
                 }
                 //console.log(document.querySelector('.header__nav__item--children.open'))
                 liNav.classList.add('open');
             }

         });
     });
     */



    const modals = document.querySelectorAll('.modal');

    modals.forEach(el => {
        el.addEventListener('click', (event) => {
            if (event.target.classList.contains('modal')) {
                closeModal();
            }
        });
    });

    if(document.getElementById('topMenuToggle')) {
        document.getElementById('topMenuToggle').addEventListener('click', (event) => {
            document.getElementById('topMenuToggle').classList.toggle('active');
            document.getElementById('topNav').classList.toggle('active');
            document.body.classList.toggle('modal-open');
        });
    }


    const accordions = document.querySelectorAll('.accordion');

    accordions.forEach(el => {

        if (el.classList.contains('first-open')) {
            el.classList.remove('first-open');
            el.querySelector('.accordion__content').style.maxHeight = el.querySelector('.accordion__content').scrollHeight + 'px';
        }

        el.querySelector('.accordion__control').addEventListener('click', (e) => {

            const self = e.currentTarget.parentNode;
            const control = e.currentTarget;
            const content = self.querySelector('.accordion__content');
            console.log(e.currentTarget);
            self.classList.toggle('open');

            // если открыт аккордеон
            if (self.classList.contains('open')) {
                content.style.maxHeight = content.scrollHeight + 'px';
            } else {
                content.style.maxHeight = null;
            }

            e.preventDefault(false);
        });
    });

    const tabs = document.querySelector('.tabs');
    const tabsBtn = document.querySelectorAll('.tabs__btn');
    const tabsContent = document.querySelectorAll('.tabs__content');

    if (tabs) {
        tabs.addEventListener('click', (e) => {
            if (e.target.classList.contains('tabs__btn')) {
                const tabsPath = e.target.dataset.tabsPath;
                tabsBtn.forEach(el => {
                    el.classList.remove('tabs__btn--active')
                });
                document.querySelector(`[data-tabs-path="${tabsPath}"]`).classList.add('tabs__btn--active');
                tabsHandler(tabsPath);
            }
        });
    }

    const tabsHandler = (path) => {
        tabsContent.forEach(el => {
            el.classList.remove('tabs__content--active')
        });
        document.querySelector(`[data-tabs-target="${path}"]`).classList.add('tabs__content--active');
    };


    const accordionsTarget = document.querySelectorAll('.accordion-target');

    accordionsTarget.forEach(el => {

        el.addEventListener('click', (e) => {


            const self = e.currentTarget.dataset.toggle;
            const control = e.currentTarget;
            const content = document.getElementById(self) ? document.getElementById(self) : false;

            if (content) {

                content.classList.toggle('open');
                control.classList.toggle('open');

                if (control.classList.contains('open')) {
                    control.innerHTML = control.dataset.close;
                } else {
                    control.innerHTML = control.dataset.open;
                }


                if (content.classList.contains('open')) {
                    if (control.dataset.parent) {
                        if (document.getElementById(control.dataset.parent)) {
                            let newMaxHeight = parseInt(document.getElementById(control.dataset.parent).style.maxHeight) + content.scrollHeight + 'px';
                            document.getElementById(control.dataset.parent).style.maxHeight = newMaxHeight;
                        }
                    }
                    content.style.maxHeight = content.scrollHeight + 'px';
                } else {
                    content.style.maxHeight = null;
                }

            }

            e.preventDefault(false);
        });
    });


    /*document.querySelector('.header__top__locale__active').addEventListener('click', function () {
        document.querySelector('.header__top__locale__list').classList.toggle('open');
    });*/

    if (document.getElementById('mobToggleNav')) {
        document.getElementById('mobToggleNav').addEventListener('click', function () {
            document.getElementById('mobNavSb').classList.toggle('open');
        });
    }


    if (document.getElementById('mobLinkPage') && window.innerWidth < 701) {
        /*let tags = document.querySelectorAll('#mobLinkPage .link--more');
        [].forEach.call(tags, function (elem) {
            elem.parentNode.style.width = elem.offsetWidth + 'px';
        });*/
        new Swiper("#mobLinkPage", {
            spaceBetween: 15,
            slidesPerView: 'auto',
            allowTouchMove: false,

            breakpoints: {
                300: {
                    allowTouchMove: true
                },
                700: {
                    allowTouchMove: true
                },
                1200: {
                    allowTouchMove: false
                },
            }
        });
    }

    if (document.getElementById('mobLinkPage2') && window.innerWidth < 701) {
        /*let tags = document.querySelectorAll('#mobLinkPage2 .link-border');
        [].forEach.call(tags, function (elem) {
            elem.parentNode.style.width = elem.offsetWidth + 'px';
        });*/
        new Swiper("#mobLinkPage2", {
            spaceBetween: 15,
            slidesPerView: 'auto',
            allowTouchMove: false,

            breakpoints: {
                300: {
                    allowTouchMove: true
                },
                700: {
                    allowTouchMove: true
                },
                1200: {
                    allowTouchMove: false
                },
            }
        });
    }

    const jsNumber = document.querySelectorAll('.js-number');

    jsNumber.forEach(el => {
        el.addEventListener('keydown', function (event) {
            if (event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 ||
                (event.keyCode == 65 && event.ctrlKey === true) ||
                (event.keyCode >= 35 && event.keyCode <= 39)) {
                return;
            } else {
                if ((event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105)) {
                    event.preventDefault();
                }
            }
        });
    });
});

function openModal(modal) {
    document.body.classList.add('modal-open');
    document.getElementById('modalBackdrop').classList.add('active');
    document.getElementById(modal).classList.add('active');
}

function closeModal() {
    document.body.classList.remove('modal-open');
    document.getElementById('modalBackdrop').classList.remove('active');
    document.querySelector('.modal.active').classList.remove('active');
}

window.createToastNode = function (title, body, className) {
    var element = document.createElement("div");
    element.innerHTML = '<div class="toastify__title">' + title + '</div><div class="toastify__text">' + body + '</div>';
    return element;
}

const dropDown = document.querySelectorAll('.dropdown__header');
dropDown.forEach(el => {
    el.addEventListener('click', (e) => {
        el.parentNode.classList.toggle("active");
    })
});

window.onclick = function(event) {
    if (!event.target.matches('.dropdown__header')) {
        var dropdowns = document.querySelectorAll('.dropdown.active');
        var i;
        for (i = 0; i < dropdowns.length; i++) {
            var openDropdown = dropdowns[i];
            openDropdown.classList.remove('active');
        }
    }
}